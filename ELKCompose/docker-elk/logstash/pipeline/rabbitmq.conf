input {
  rabbitmq {
    id => "rabbitmq_logs"
    host => "rabbitmq"
    queue => "logs_queue"
    user => "longpv2" 
    password => "longpv2"
    port => 5672
    vhost => "/"
    codec => json
    ack => false
  }
}

filter {
        grok {
                match => {"message" => "%{COMBINEDAPACHELOG}"}
        }
        date {
                match => ["timestamp", "dd/MM/yyyy:HH:mm:ss Z"]
        }
}

output {
  elasticsearch {
    hosts => ["elasticsearch:9200"]
    index => "rabbitmq_logs"
    user => "elastic"
    password => "changeme"
  }
  stdout {
          codec => rubydebug
  }
}
